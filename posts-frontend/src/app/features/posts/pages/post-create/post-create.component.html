<div class="max-w-2xl mx-auto p-6 bg-bg-card shadow-lg rounded-xl mt-10">
  <div class="mb-5">
    <h2 class="text-2xl font-bold text-primary">Crear Nueva Publicación</h2>
  </div>

  <form [formGroup]="postForm" (ngSubmit)="onSubmit()" class="space-y-5">
    <div>
      <label class="block text-sm font-medium text-gray-700">Título</label>
      <input
        type="text"
        formControlName="title"
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 border p-2"
        [class.border-red-500]="isControlInvalid('title')"
      />
      @if (isControlInvalid('title')) {
        <span class="text-red-500 text-xs">El título es requerido (mínimo 3 caracteres).</span>
      }
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700">Autor</label>
      <input
        type="text"
        formControlName="author"
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 border p-2"
      />
      @if (isControlInvalid('author')) {
        <span class="text-red-500 text-xs">El autor es requerido.</span>
      }
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700">Contenido</label>
      <textarea
        formControlName="body"
        rows="4"
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 border p-2"
      ></textarea>
      @if (isControlInvalid('body')) {
        <span class="text-red-500 text-xs">El contenido debe tener al menos 10 caracteres.</span>
      }
    </div>

    <div class="flex justify-end space-x-3 pt-4">
      <a routerLink="/posts" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200">
        Cancelar
      </a>
      <button
        type="submit"
        [disabled]="postForm.invalid || isLoading()"
        class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"
      >
        {{ isEditMode() ? 'Editar Publicación' : 'Crear Nueva Publicación' }}
      </button>
    </div>
  </form>
</div>
