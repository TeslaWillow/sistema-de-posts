<div class="max-w-4xl mx-auto p-6">
  <div class="mb-6 flex justify-between items-center">
    <h2 class="text-2xl font-bold text-gray-800">Carga Masiva de Publicaciones</h2>
    <a [routerLink]="['/posts']" class="text-blue-600 hover:underline">Volver al listado</a>
  </div>

  <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-6">
    <p class="text-sm text-blue-700">
      <strong>Instrucciones:</strong> Pega un arreglo de objetos JSON. Cada objeto debe tener:
      <code class="bg-blue-100 px-1">title</code>, <code class="bg-blue-100 px-1">body</code> y
      <code class="bg-blue-100 px-1">author</code>.
    </p>
  </div>

  <div class="bg-white shadow-md rounded-lg p-6">
    <textarea
      [formControl]="jsonControl"
      rows="12"
      placeholder='[{"title": "Ejemplo 1", "body": "Contenido...", "author": "Autor"}, ...]'
      class="w-full p-4 font-mono text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 outline-none"
    ></textarea>

    @if (errorMessage() || isJsonControlInvalid()) {
      <p class="text-red-500 text-sm mt-2">{{ errorMessage() }}</p>
    }

    <div class="mt-6 flex justify-end">
      <button
        (click)="processBulk()"
        [disabled]="jsonControl.invalid || isLoading()"
        class="bg-green-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 flex items-center"
      >
        @if (isLoading()) {
          Procesando...
        } @else {
          Importar Datos
        }
      </button>
    </div>

    @if(isLoading()) {
     <ui-spinner-loader/>
    }

  </div>
</div>
