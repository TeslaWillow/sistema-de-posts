<div class="max-w-4xl mx-auto p-6">
  <div class="mb-6 flex justify-between items-center">
    <h2 class="text-2xl font-bold text-primary">
      <a [routerLink]="['/posts']">&larr;</a> Carga Masiva de Publicaciones
    </h2>
  </div>

  <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-6">
    <p class="text-sm text-blue-700">
      <strong>Instrucciones:</strong> Pega un arreglo de objetos JSON. Cada objeto debe tener:
      <code class="bg-blue-100 px-1">title</code>, <code class="bg-blue-100 px-1">body</code> y
      <code class="bg-blue-100 px-1">author</code>.
    </p>
  </div>

  <div class="bg-bg-surface border border-border-main rounded-2xl p-6 shadow-sm p-6">
    <app-form-field [errorMessage]="errorMessage() || isJsonControlInvalid() ? errorMessage() : null">
      <textarea
        [formControl]="jsonControl"
        rows="12"
        placeholder='[{"title": "Ejemplo 1", "body": "Contenido...", "author": "Autor"}, ...]'
        class="w-full p-4 font-mono text-sm border border-border-main rounded-md focus:ring-2 focus:ring-primary outline-none"
      ></textarea>
    </app-form-field>

    <div class="flex justify-end space-x-3 mt-3">
      <app-button
        [routerLink]="['/posts']"
        variant="outline"
      >
        Cancelar
      </app-button>
      <app-button
        (clicked)="processBulk()"
        variant="primary"
        [disabled]="jsonControl.invalid || isLoading()"
      >
        @if (isLoading()) {
          Procesando...
        } @else {
          Importar Datos
        }
      </app-button>
    </div>

    @if(isLoading()) {
     <loader-spinner/>
    }

  </div>
</div>
